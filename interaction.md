```mermaid

flowchart TD
    %% === Пользователь ===
    subgraph USER["Пользователь"]
        A["Telegram / Мессенджер"]
    end

    %% === Бот ===
    subgraph BOT["Telegram Бот (aiogram)"]
        B1["Обработка команд / Кнопки"]
        B2["Шаги анкеты: Имя, Возраст, Пол, Фото, Описание"]
        B3["Просмотр анкет / Лайки / Пропустить / Стоп"]
    end

    %% === Backend / Логика ===
    subgraph BACKEND["Сервер / Backend (FastAPI)"]
        F1["REST API между ботом и БД"]
        F2["Логика матчей / проверка взаимности"]
        F3["Обработка фото / верификация"]
    end

    %% === База данных ===
    subgraph DB["База данных"]
        D1["SQLite / PostgreSQL: анкеты, лайки, матчи"]
        D2["Jina / локальное хранение: фото пользователей"]
    end

    %% === Связи ===
    %% Пользователь ↔ Бот
    A --> B1
    B1 --> B2
    B2 --> B3

    %% Бот ↔ Backend
    B2 --> F1
    B3 --> F1

    %% Backend ↔ Логика и обработка фото
    F1 --> F2
    F1 --> F3

    %% Backend ↔ База данных
    F2 --> D1
    F3 --> D2

    %% Бот получает данные из БД
    D1 --> B3
    D2 --> B2